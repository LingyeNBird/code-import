# 实施任务清单

## 1. 添加重试逻辑到 GetSubGroup 方法
- [x] 1.1 在 `CodingVcs.GetSubGroup()` 方法中定义重试间隔切片 `[]time.Duration{1秒, 5秒, 10秒}`
- [x] 1.2 实现围绕 `coding.GetProjectByName()` 调用的重试循环
- [x] 1.3 为每次重试尝试添加适当的日志消息(WARN 级别),格式: `"获取项目 %s 信息失败 (尝试 %d/3): %v"`
- [x] 1.4 最终失败时,记录 WARN 级别消息,包含完整错误详情,格式: `"获取项目 %s 信息最终失败,已重试3次,仅使用项目名称继续迁移: %v"`
- [x] 1.5 API 调用失败时返回干净的 `SubGroup`,仅填充 `Name` 字段,`Desc` 和 `Remark` 为空字符串
- [x] 1.6 添加 `import "time"` 到文件头部(如果尚未存在)

## 2. 代码质量保证
- [x] 2.1 确保代码遵循 Go 编码规范(运行 `gofmt` 和 `goimports`)
- [x] 2.2 运行 `go vet` 并解决所有静态分析问题
- [x] 2.3 验证重试时间间隔符合规范(1秒、5秒、10秒)
- [x] 2.4 确认 API 失败时不会发生 panic 或程序退出
- [x] 2.5 更新代码中的中文注释,说明重试机制行为

## 3. 测试
- [x] 3.1 添加单元测试:成功的 API 调用(无需重试)
- [x] 3.2 添加单元测试:暂时性失败(第2次或第3次尝试成功)
- [x] 3.3 添加单元测试:完全失败(3次重试全部耗尽)
- [x] 3.4 验证 WARN 日志输出包含错误详情
- [x] 3.5 验证 API 失败后迁移流程继续执行
- [x] 3.6 运行 `go test -v ./pkg/vcs/` 确保所有测试通过

## 4. 文档更新
- [x] 4.1 在 `GetSubGroup()` 方法中添加中文注释解释重试机制
- [x] 4.2 在代码注释中记录优雅降级行为
- [x] 4.3 确保所有注释遵循项目的中文注释约定
