.PLUGIN_CNB_ROOT_ORGANIZATION: &PLUGIN_CNB_ROOT_ORGANIZATION
  PLUGIN_CNB_ROOT_ORGANIZATION:
    # 单选下拉选择框
    name: CNB根组织名称
    description: "你创建的CNB根组织名称,示例: root"
    required: true
    type: input
.PLUGIN_CNB_TOKEN: &PLUGIN_CNB_TOKEN
  PLUGIN_CNB_TOKEN:
    name: CNB平台token
    description: "CNB平台token,常见场景勾选“迁移工具凭据”，即可快速完成授权。 创建地址:https://cnb.cool/profile/token"
    required: true
    type: input
.PLUGIN_CNB_URL: &PLUGIN_CNB_URL
  PLUGIN_CNB_URL:
    name: CNB平台URL
    description: CNB平台URL,一般保持默认即可
    required: true
.PLUGIN_MIGRATE_ALLOW_INCOMPLETE_PUSH: &PLUGIN_MIGRATE_ALLOW_INCOMPLETE_PUSH
  PLUGIN_MIGRATE_ALLOW_INCOMPLETE_PUSH:
    name: 忽略 LFS 文件下载报错，继续迁移，默认不忽略，一般保持默认即可，谨慎开启！
    description: "忽略 LFS 文件下载报错，继续迁移，默认不忽略，一般保持默认即可，谨慎开启！"
    required: true
    type: select
    default: false
    options:
      - name: 忽略
        value: true
      - name: 不忽略
        value: false
# .cnb/web_trigger.yml
branch:
  - buttons:
    - name: CODING
      # 如存在，则将作为流水线 title，否则流水线使用默认 title
      description: 从CODING批量迁移仓库到CNB
      event: web_trigger_code_import # 触发的 CI 事件名
      # 权限控制，不配置则有仓库写权限的用户可触发构建
      # 如果配置，则需要有仓库写权限，并且满足 roles 或 users 其中之一才有权限触发构建
      env:
        PLUGIN_SOURCE_PLATFORM: coding
        PLUGIN_CNB_URL: https://cnb.cool
        PLUGIN_SOURCE_URL: https://e.coding.net
      # 可输入环境变量，可覆盖上述 env 的变量配置
      inputs:
        # 目前支持以下三种格式：输入框（input）、多行文本输入框（textarea）、下拉选择框（select 支持单选和多选），switch 开关
        # 其中 key 值（var1、var2、var3、var4、var5）为环境变量名
        PLUGIN_SOURCE_TOKEN:
          # 输入框
          name: 源平台token
          description: "仅限团队负责人或团队管理员token,权限要求:用户信息-只读、项目信息-只读、代码仓库-只读 创建地址:https://e.coding.net/user/account/setting/tokens"
          required: true # 是否必填
          type: input
        <<: *PLUGIN_CNB_ROOT_ORGANIZATION
        <<: *PLUGIN_CNB_TOKEN
        <<: *PLUGIN_MIGRATE_ALLOW_INCOMPLETE_PUSH
        PLUGIN_MIGRATE_MAP_CODING_DISPLAY_NAME:
          name: 映射 CODING 项目名为 CNB 子组织名称
          description: 映射 CODING 项目显示名称为 CNB 子组织别名，默认开启，一般保持默认即可,如遇创建子组织报错，可尝试关闭此选项
          type: select
          default: true
          options:
            - name: 开启
              value: true
            - name: 关闭
              value: false          
        PLUGIN_MIGRATE_MAP_CODING_DESCRIPTION:
          name: 映射 CODING 项目简介为 CNB 子组织简介
          description: 映射 CODING 项目简介为 CNB 子组织简介，默认开启，一般保持默认即可,如遇创建子组织报错，可尝试关闭此选项
          type: select
          default: true
          options:
            - name: 开启
              value: true
            - name: 关闭
              value: false        
    - name: GitLab
      # 如存在，则将作为流水线 title，否则流水线使用默认 title
      description: 从Gitlab批量迁移仓库到CNB
      event: web_trigger_code_import # 触发的 CI 事件名
      # 权限控制，不配置则有仓库写权限的用户可触发构建
      # 如果配置，则需要有仓库写权限，并且满足 roles 或 users 其中之一才有权限触发构建
#      permissions:
#        # roles 和 users 配置其中之一或都配置均可，二者满足其一即可
#        roles:
#          - developer
#          - owner
#          - master
      env:
        PLUGIN_SOURCE_PLATFORM: gitlab
        PLUGIN_CNB_URL: https://cnb.cool
        PLUGIN_SOURCE_URL: https://gitlab.com
      # 可输入环境变量，可覆盖上述 env 的变量配置
      inputs:
        # 目前支持以下三种格式：输入框（input）、多行文本输入框（textarea）、下拉选择框（select 支持单选和多选），switch 开关
        # 其中 key 值（var1、var2、var3、var4、var5）为环境变量名
        PLUGIN_SOURCE_TOKEN:
          # 输入框
          name: "源平台token"
          description: "权限要求: read_api, 创建地址:https://gitlab.com/profile/personal_access_tokens"
          required: true # 是否必填
          type: input
        <<: *PLUGIN_CNB_ROOT_ORGANIZATION
        <<: *PLUGIN_CNB_TOKEN
        <<: *PLUGIN_MIGRATE_ALLOW_INCOMPLETE_PUSH
    - name: GitHub
      # 如存在，则将作为流水线 title，否则流水线使用默认 title
      description: 从Github批量迁移仓库到CNB
      event: web_trigger_code_import # 触发的 CI 事件名
      # 权限控制，不配置则有仓库写权限的用户可触发构建
      # 如果配置，则需要有仓库写权限，并且满足 roles 或 users 其中之一才有权限触发构建
      #      permissions:
      #        # roles 和 users 配置其中之一或都配置均可，二者满足其一即可
      #        roles:
      #          - developer
      #          - owner
      #          - master
      env:
        PLUGIN_SOURCE_PLATFORM: github
        PLUGIN_CNB_URL: https://cnb.cool
        PLUGIN_SOURCE_URL: https://github.com        
      # 可输入环境变量，可覆盖上述 env 的变量配置
      inputs:
        # 目前支持以下三种格式：输入框（input）、多行文本输入框（textarea）、下拉选择框（select 支持单选和多选），switch 开关
        # 其中 key 值（var1、var2、var3、var4、var5）为环境变量名
        PLUGIN_SOURCE_TOKEN:
          # 输入框
          name: "源平台token"
          description: "权限要求: repo:all、read:org  创建地址:https://github.com/settings/tokens （classic token)"
          required: true # 是否必填
          type: input
        <<: *PLUGIN_CNB_ROOT_ORGANIZATION
        <<: *PLUGIN_CNB_TOKEN
        <<: *PLUGIN_MIGRATE_ALLOW_INCOMPLETE_PUSH
    - name: Gitee
      # 如存在，则将作为流水线 title，否则流水线使用默认 title
      description: 从Gitee批量迁移仓库到CNB
      event: web_trigger_code_import # 触发的 CI 事件名
      # 权限控制，不配置则有仓库写权限的用户可触发构建
      # 如果配置，则需要有仓库写权限，并且满足 roles 或 users 其中之一才有权限触发构建
      #      permissions:
      #        # roles 和 users 配置其中之一或都配置均可，二者满足其一即可
      #        roles:
      #          - developer
      #          - owner
      #          - master
      env:
        PLUGIN_SOURCE_PLATFORM: gitee
        PLUGIN_CNB_URL: https://cnb.cool
        PLUGIN_SOURCE_URL: https://gitee.com        
      # 可输入环境变量，可覆盖上述 env 的变量配置
      inputs:
        # 目前支持以下三种格式：输入框（input）、多行文本输入框（textarea）、下拉选择框（select 支持单选和多选），switch 开关
        # 其中 key 值（var1、var2、var3、var4、var5）为环境变量名
        PLUGIN_SOURCE_TOKEN:
          # 输入框
          name: "源平台token"
          description: "权限要求: user_info、projects 创建地址:https://gitee.com/profile/personal_access_tokens"
          required: true # 是否必填
          type: input
        <<: *PLUGIN_CNB_ROOT_ORGANIZATION
        <<: *PLUGIN_CNB_TOKEN
        <<: *PLUGIN_MIGRATE_ALLOW_INCOMPLETE_PUSH
    - name: Codeup(云效)
      # 如存在，则将作为流水线 title，否则流水线使用默认 title
      description: 从Codeup批量迁移仓库到CNB
      event: web_trigger_code_import # 触发的 CI 事件名
      # 权限控制，不配置则有仓库写权限的用户可触发构建
      # 如果配置，则需要有仓库写权限，并且满足 roles 或 users 其中之一才有权限触发构建
#      permissions:
#        # roles 和 users 配置其中之一或都配置均可，二者满足其一即可
#        roles:
#          - developer
#          - owner
#          - master
      env:
        PLUGIN_SOURCE_PLATFORM: aliyun
        PLUGIN_CNB_URL: https://cnb.cool      # 可输入环境变量，可覆盖上述 env 的变量配置
      inputs:
        # 目前支持以下三种格式：输入框（input）、多行文本输入框（textarea）、下拉选择框（select 支持单选和多选），switch 开关
        # 其中 key 值（var1、var2、var3、var4、var5）为环境变量名
        PLUGIN_SOURCE_ORGANIZATIONID:
          # 输入框
          name: 云效代码仓库组织ID
          description: 在云效组织基本信息页面，查看当前组织ID。
          required: true
          type: input
        PLUGIN_SOURCE_TOKEN:
          # 输入框
          name: "源平台token"
          description: "权限要求: 代码仓库:只读 创建地址:https://account-devops.aliyun.com/settings/personalAccessToken"
          required: true # 是否必填
          type: input
        <<: *PLUGIN_CNB_ROOT_ORGANIZATION
        <<: *PLUGIN_CNB_TOKEN
        <<: *PLUGIN_MIGRATE_ALLOW_INCOMPLETE_PUSH        
    - name: Gitea
      # 如存在，则将作为流水线 title，否则流水线使用默认 title
      description: 从Gitea批量迁移仓库到CNB
      event: web_trigger_code_import # 触发的 CI 事件名
      # 权限控制，不配置则有仓库写权限的用户可触发构建
      # 如果配置，则需要有仓库写权限，并且满足 roles 或 users 其中之一才有权限触发构建
      #      permissions:
      #        # roles 和 users 配置其中之一或都配置均可，二者满足其一即可
      #        roles:
      #          - developer
      #          - owner
      #          - master
      env:
        PLUGIN_SOURCE_PLATFORM: gitea
        PLUGIN_CNB_URL: https://cnb.cool
      # 可输入环境变量，可覆盖上述 env 的变量配置
      inputs:
        # 目前支持以下三种格式：输入框（input）、多行文本输入框（textarea）、下拉选择框（select 支持单选和多选），switch 开关
        # 其中 key 值（var1、var2、var3、var4、var5）为环境变量名
        PLUGIN_SOURCE_URL:
          name: "源平台 URL"
          required: true
          type: input
          default: https://gitea.com
        PLUGIN_SOURCE_TOKEN:
          # 输入框
          name: "源平台token"
          description: "权限要求: read:organization、read:repository、read:user https://gitea.com/user/settings/applications (设置-应用-生成新的令牌)"
          required: true # 是否必填
          type: input
        <<: *PLUGIN_CNB_ROOT_ORGANIZATION
        <<: *PLUGIN_CNB_TOKEN
        <<: *PLUGIN_MIGRATE_ALLOW_INCOMPLETE_PUSH
    - name: CNB
      # 如存在，则将作为流水线 title，否则流水线使用默认 title
      description: 从CNB批量迁移仓库到CNB
      event: web_trigger_code_import # 触发的 CI 事件名
      # 权限控制，不配置则有仓库写权限的用户可触发构建
      # 如果配置，则需要有仓库写权限，并且满足 roles 或 users 其中之一才有权限触发构建
      #      permissions:
      #        # roles 和 users 配置其中之一或都配置均可，二者满足其一即可
      #        roles:
      #          - developer
      #          - owner
      #          - master
      env:
        PLUGIN_SOURCE_PLATFORM: cnb
        PLUGIN_SOURCE_URL: https://cnb.cool
      # 可输入环境变量，可覆盖上述 env 的变量配置
      inputs:
        # 目前支持以下三种格式：输入框（input）、多行文本输入框（textarea）、下拉选择框（select 支持单选和多选），switch 开关
        # 其中 key 值（var1、var2、var3、var4、var5）为环境变量名
        PLUGIN_SOURCE_TOKEN:
          # 输入框
          name: "源平台token"
          description: "权限要求: account-engage:r、group-resource:r https://cnb.cool/profile/token"
          required: true # 是否必填
          type: input
        PLUGIN_SOURCE_GROUP:
          # 输入框
          name: "源CNB平台根组织"
          description: "迁移指定 CNB 根组织下仓库"
          required: true # 是否必填
          type: input                  
        PLUGIN_CNB_URL:
          name: "目标CNB URL"
          description: "如迁移至企业版请自行修改"
          required: true
          type: input
          default: https://cnb.cool
        <<: *PLUGIN_CNB_ROOT_ORGANIZATION
        <<: *PLUGIN_CNB_TOKEN
        <<: *PLUGIN_MIGRATE_ALLOW_INCOMPLETE_PUSH        