_ADVANCE_OPTIONS: &ADVANCE_OPTIONS
  # PLUGIN_CNB_ROOT_ORGANIZATION:
  #   name: CNB根组织名称
  #   description: "你创建的CNB根组织名称,示例: root,创建地址:https://cnb.cool/new/groups"
  #   required: true
  #   type: input
  PLUGIN_CNB_TOKEN:
    name: CNB平台token
    description: "CNB平台token,常见场景勾选\"迁移工具凭据\"，即可快速完成授权。 创建地址:https://cnb.cool/profile/token"
    required: true
    type: input
  PLUGIN_MIGRATE_FORCE_PUSH:
    name: ⚠️谨慎开启！强制push到CNB仓库,CNB侧仓库会被强制覆盖，一般默认关闭即可。
    description: "⚠️谨慎开启！强制push到CNB仓库,CNB侧仓库会被强制覆盖。"
    required: true
    type: switch
    default: false
    options:
      - name: 开启
        value: true
      - name: 不开启
        value: false     
  PLUGIN_MIGRATE_ALLOW_INCOMPLETE_PUSH:
    name: ⚠️谨慎开启！适用于你明确知道某些历史文件已丢失或损坏，下载和拖送 LFS 文件时忽略报错，继续迁移，默认不开启，一般保持默认即可。
    description: "⚠️谨慎开启！适用于你明确知道某些历史文件已丢失或损坏，针对LFS源文件丢失的仓库，如下载LFS文件报错`LFS: Repository or object not found`,忽略LFS文件下载报错，LFS推送时忽略丢失的对象报错，继续推送。详见[git-lfs 官方文档](https://github.com/git-lfs/git-lfs/blob/main/docs/man/git-lfs-config.adoc#push-settings) `lfs.allowincompletepush`选项。"
    required: true
    type: switch
    default: false
    options:
      - name: 开启
        value: true
      - name: 不开启
        value: false
  PLUGIN_MIGRATE_REBASE:
    name: ⚠️当两侧都有提交代码时，可以尝试使用git rebase保证代码双向同步，CNB侧提交的代码不会被覆盖，但是如遇冲突需人工解决。
    description: "使用git rebase保证代码同步，CNB侧提交的流水线配置代码不会被覆盖,如遇冲突需人工解决。⚠️如开启该配置，将启用强制推送（PLUGIN_MIGRATE_FORCE_PUSH=\"true\"），并在迁移工具执行的工作目录备份CNB侧代码仓库"
    required: true
    type: switch
    default: false
    options:
      - name: 开启
        value: true
      - name: 不开启
        value: false
  PLUGIN_MIGRATE_RELEASE:
    name: 是否同步release
    description: 是否同步release
    required: true
    type: switch
    default: true
    options:
      - name: 开启
        value: true
      - name: 不开启
        value: false
       


branch:
  - buttons:
    - name: CODING 迁移至 CNB
      isDefault: true
      image: img/coding.png
      description: 从CODING批量迁移仓库到CNB
      event: web_trigger_code_import
      env:
        PLUGIN_SOURCE_PLATFORM: coding
        #PLUGIN_CNB_URL: https://cnb\.cool
        PLUGIN_SOURCE_URL: https://e.coding.net
      inputs:
        PLUGIN_SOURCE_TOKEN:
          name: 源平台token
          description: "仅限团队负责人或团队管理员token,权限要求:用户信息-只读、项目信息-只读、代码仓库-只读 创建地址:https://e.coding.net/user/account/setting/tokens"
          required: true
          type: input
        <<: *ADVANCE_OPTIONS
        PLUGIN_MIGRATE_MAP_CODING_DISPLAY_NAME:
          name: 映射 CODING 项目名为 CNB 子组织别名
          description: 映射 CODING 项目显示名称为 CNB 子组织别名，默认开启，一般保持默认即可,如遇创建子组织报错，可尝试关闭此选项
          type: switch
          default: true
          options:
            - name: 开启
              value: true
            - name: 关闭
              value: false          
        PLUGIN_MIGRATE_MAP_CODING_DESCRIPTION:
          name: 映射 CODING 项目简介为 CNB 子组织简介
          description: 映射 CODING 项目简介为 CNB 子组织简介，默认开启，一般保持默认即可,如遇创建子组织报错，可尝试关闭此选项
          type: switch
          default: true
          options:
            - name: 开启
              value: true
            - name: 关闭
              value: false        
    - name: GitLab 迁移至 CNB
      image: img/gitlab.png
      description: 从Gitlab批量迁移仓库到CNB
      event: web_trigger_code_import
      env:
        PLUGIN_SOURCE_PLATFORM: gitlab
        #PLUGIN_CNB_URL: https://cnb\.cool
        PLUGIN_SOURCE_URL: https://gitlab.com
      inputs:
        PLUGIN_SOURCE_TOKEN:
          name: "源平台token"
          description: "权限要求: read_api, 创建地址:https://gitlab.com/profile/personal_access_tokens"
          required: true
          type: input
        <<: *ADVANCE_OPTIONS
    - name: GitHub 迁移至 CNB
      image: img/github.png
      description: 从Github批量迁移仓库到CNB
      event: web_trigger_code_import
      env:
        PLUGIN_SOURCE_PLATFORM: github
        #PLUGIN_CNB_URL: https://cnb\.cool
        PLUGIN_SOURCE_URL: https://github.com        
      inputs:
        PLUGIN_SOURCE_TOKEN:
          name: "源平台token"
          description: "权限要求: repo:all、read:org  创建地址:https://github.com/settings/tokens （classic token)"
          required: true
          type: input
        <<: *ADVANCE_OPTIONS
    - name: Gitee 迁移至 CNB
      image: img/gitee.png
      description: 从Gitee批量迁移仓库到CNB
      event: web_trigger_code_import
      env:
        PLUGIN_SOURCE_PLATFORM: gitee
        #PLUGIN_CNB_URL: https://cnb\.cool
        PLUGIN_SOURCE_URL: https://gitee.com        
      inputs:
        PLUGIN_SOURCE_TOKEN:
          name: "源平台token"
          description: "权限要求: user_info、projects 创建地址:https://gitee.com/profile/personal_access_tokens"
          required: true
          type: input
        <<: *ADVANCE_OPTIONS      
    - name: Gitea 迁移至 CNB
      image: img/gitea.png
      description: 从Gitea批量迁移仓库到CNB
      event: web_trigger_code_import
      env:
        PLUGIN_SOURCE_PLATFORM: gitea
        #PLUGIN_CNB_URL: https://cnb\.cool
      inputs:
        PLUGIN_SOURCE_URL:
          name: "源平台 URL"
          required: true
          type: input
          default: https://gitea.com
        PLUGIN_SOURCE_TOKEN:
          name: "源平台token"
          description: "权限要求: read:organization、read:repository、read:user https://gitea.com/user/settings/applications (设置-应用-生成新的令牌)"
          required: true
          type: input
        <<: *ADVANCE_OPTIONS
    - name: CNB 迁移至 CNB
      image: img/cnb.png
      description: 从CNB批量迁移仓库到CNB
      event: web_trigger_code_import
      env:
        PLUGIN_SOURCE_PLATFORM: cnb
        PLUGIN_SOURCE_URL: https://cnb.cool
      inputs:
        PLUGIN_SOURCE_TOKEN:
          name: "源平台token"
          description: "权限要求: account-engage:r、group-resource:r https://cnb.cool/profile/token"
          required: true
          type: input
        PLUGIN_SOURCE_GROUP:
          name: "源CNB平台根组织"
          description: "迁移指定 CNB 根组织下仓库"
          required: true
          type: input                  
        PLUGIN_CNB_URL:
          name: "目标CNB URL"
          description: "如迁移至企业版请自行修改"
          required: true
          type: input
        <<: *ADVANCE_OPTIONS        
    - name: 阿里云(Codeup) 迁移至 CNB 
      image: img/aliyun.png
      description: 从Codeup批量迁移仓库到CNB
      event: web_trigger_code_import
      env:
        PLUGIN_SOURCE_PLATFORM: aliyun
        #PLUGIN_CNB_URL: https://cnb\.cool
      inputs:
        PLUGIN_SOURCE_ORGANIZATIONID:
          name: 云效代码仓库组织ID
          description: 在云效组织基本信息页面，查看当前组织ID。
          required: true
          type: input
        PLUGIN_SOURCE_TOKEN:
          name: "源平台token"
          description: "权限要求: 代码仓库:只读 创建地址:https://account-devops.aliyun.com/settings/personalAccessToken"
          required: true
          type: input
        <<: *ADVANCE_OPTIONS        
    - name: 华为云(CodeArts Repo) 迁移至 CNB 
      image: img/huaweiyun.png
      description: 从华为云(CodeArts Repo)批量迁移仓库到CNB
      event: web_trigger_code_import
      env:
        PLUGIN_SOURCE_PLATFORM: huaweicloud
        #PLUGIN_CNB_URL: https://cnb\.cool
      inputs:
        PLUGIN_SOURCE_TOKEN:
          name: "源平台token"
          description: 仓库访问令牌，用于代码 clone。创建位置：仓库首页-个人设置-代码托管-访问令牌
          type: input
        PLUGIN_SOURCE_AK:
          name: 华为云 access key
          description: 用于请求华为云 API 接口。创建位置：控制台-个人信息-我的凭证-访问密钥
          required: true
          type: input  
        PLUGIN_SOURCE_SK:
          name: 华为云 secret key 
          description: 用于请求华为云 API 接口。创建位置：控制台-个人信息-我的凭证-访问密钥
          required: true
          type: input
        PLUGIN_SOURCE_REGION:
          name: 华为云仓库服务所在区域
          description: 默认华北-北京四，详见https://support.huaweicloud.com/api-codeartsrepo/codeartsrepo_05_0001.html
          required: true
          type: select
          default: cn-north-4
          options:
            - name: 华北-北京四
              value: cn-north-4
            - name: 华南-深圳
              value: cn-south-2
            - name: 华东-上海二
              value: cn-east-2
            - name: 华东-上海一
              value: cn-east-3
            - name: 华北-北京一
              value: cn-north-1
            - name: 华南-广州
              value: cn-south-1
            - name: 西南-贵阳一
              value: cn-southwest-2
        <<: *ADVANCE_OPTIONS